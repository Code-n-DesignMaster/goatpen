$(function(){$("#search-go").on("click",function(t){t.preventDefault(),$("#search-error").remove(),$("#search-results").empty();var a=$("#search-influencer").val(),e=$("#search-platform").val();$.ajax({url:"/channels.json",data:{influencer:a,platform:e},dataType:"json",success:function(t){$.each(t,function(){$("#search-results").append($("<option>").val(this.id).attr({"data-platform":this.platform_id,"data-price":this.price}).text(this.influencer+" \\ "+this.channel+" ["+this.platform+"]"))})},error:function(t){$("#channel-search-modal").find(".modal-body hr").after('<div class="alert alert-dismissible alert-danger" id="search-error"><button type="button" class="close" data-dismiss="alert"><i class="fa fa-times"></i></button>'+t.responseJSON.error+"</div>")}})}),$("#search-add-post, #search-add-stat").on("click",function(t){t.preventDefault();var a=$("#search-results"),e=$("."+("search-add-post"===$(this).attr("id")?"post":"stat")+":last"),n=e.hasClass("hidden");n||(e=e.clone());var i=parseInt(e.attr("data-count")),d=n?i:i+1;e.attr("data-count",d),e.find(".count").text(d),e.find(".delete").remove(),e.find(".channel-description").text(a.find("option:selected").text()),e.find("input").val(""),e.find("select").val(0),e.find('input:hidden[name$="[channel_id]"]').val(a.val()),e.find('input[name$="[posted]"]').prop("required",!0),e.find("label[for]").each(function(){$(this).attr("for",$(this).attr("for").replace(/_(new_)?\d+$/,"_new_"+d))}),e.find("input[id]").each(function(){$(this).attr("id",$(this).attr("id").replace(/_(new_)?\d+$/,"_new_"+d))}),e.find("input[name]").each(function(){$(this).attr("name",$(this).attr("name").replace(/\[(new_)?\d+\]/,"[new_"+d+"]"))}),e.find("input[data-name]").each(function(){$(this).attr("data-name",$(this).attr("data-name").replace(/\[(new_)?\d+\]/,"[new_"+d+"]"))});var r=e.find(".metrics");r.removeClass("hidden"),r.find("li[data-platforms]").addClass("hidden").find("input").val(""),r.find('li[data-platforms*=",'+a.find("option:selected").attr("data-platform")+',"]').removeClass("hidden"),r.find('input[name$="[metric][28]"]').val(a.find("option:selected").attr("data-price")),r.find('input[data-name$="[metric][28]"]').val(a.find("option:selected").attr("data-price")),r.find("li.hidden input[name]").each(function(){$(this).attr("data-name",$(this).attr("name")).removeAttr("name")}),r.find("li:not(.hidden) input[data-name]").each(function(){$(this).attr("name",$(this).attr("data-name")).removeAttr("data-name")}),n?e.removeClass("hidden"):"search-add-post"===$(this).attr("id")?$("#posts").append(e):$("#stats").append(e),$("#channel-search-modal").modal("hide")})});
//# sourceMappingURL=./campaign-min.js.map